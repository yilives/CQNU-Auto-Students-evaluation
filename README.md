# CQNU-Auto-Students-evaluation
# 学生评价自动填报工具
# 适用于正方教务系统
![Version](https://img.shields.io/badge/version-2.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Platform](https://img.shields.io/badge/platform-Tampermonkey-orange.svg)

一个基于 Tampermonkey 的高级油猴脚本，用于自动填报学生评价系统（支持CQNU重庆师范大学及类似系统）。该脚本采用完整的鼠标事件模拟、随机延时、人类行为模式等反爬虫措施，确保评价过程自然、安全。

## ✨ 功能特性

### 核心功能
- 🤖 **完全自动化评价** - 自动填写所有评价项目、评语、并保存
- 👨‍🏫 **多老师批量处理** - 自动检测未评价老师并依次评价
- 💬 **智能评语库** - 内置8条精心设计的评价语句（60-80字），自动随机选择
- ⏱️ **灵活延时控制** - 可自定义延时范围，模拟真实用户操作

### 高级反检测功能
- 🎯 **完整鼠标事件序列** - mouseover → mousedown → click → mouseup → change → mouseout，完全模拟用户真实操作
- 🎲 **随机操作延时** - 每项操作延时1500-4000ms，避免被检测为自动化
- 💭 **模拟思考暂停** - 15%概率随机暂停500-2000ms，增强人类行为特征
- 📊 **智能评分分配** - 可配置"符合"与"完全符合"的数量范围，支持2-3个随机"符合"评价

### 用户体验功能
- 🎛️ **可视化控制面板** - 界面清晰，支持实时配置
- ⏸️ **暂停/恢复功能** - 随时暂停和恢复评价过程
- 📝 **详细日志输出** - 控制台输出完整的执行日志，便于调试和监控
- 💾 **智能保存验证** - 多次保存确认机制，自动处理弹窗

### 自动化选项
- ☑️ **自动切换老师** - 自动检测下一位未评价的老师并继续评价
- ✅ **保存后自动提交** - 可选的自动提交功能

## 📋 系统需求

- **浏览器** - Chrome、Firefox、Edge 等现代浏览器
- **扩展** - [Tampermonkey](https://www.tampermonkey.net/) 油猴脚本管理器
- **系统** - Windows、macOS、Linux

## 🚀 快速开始

### 1. 安装 Tampermonkey

访问 [Tampermonkey 官网](https://www.tampermonkey.net/) 或在浏览器扩展市场搜索"Tampermonkey"安装。

### 2. 安装脚本

**方法一：直接安装（推荐）**
- 点击 [auto_evaluate.js](./auto_evaluate.js) 文件
- 在 Tampermonkey 中点击"安装此脚本"

**方法二：手动复制**
1. 在 Tampermonkey 中新建脚本
2. 复制 `auto_evaluate.js` 的全部代码
3. 粘贴到新脚本中并保存

### 3. 配置脚本

1. 打开学生评价页面（CQNU示例：`https://jwglxt.cqnu.edu.cn/jwglxt/xspjgl/xspj_*`）
2. 脚本会自动在页面右下角生成控制面板
3. 根据需要调整配置选项
4. 点击"开始自动填报"按钮

## ⚙️ 配置说明

### 基础配置

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 最小延时 | 1500ms | 操作间隔的最小值 |
| 最大延时 | 4000ms | 操作间隔的最大值 |
| 保存次数 | 2次 | 每次评价的保存重试次数 |
| 保存间隔 | 3000ms | 多次保存之间的延时 |

### 评分配置

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 最少"符合" | 2个 | 每位老师最少"符合"评价数 |
| 最多"符合" | 3个 | 每位老师最多"符合"评价数 |
| 目标分配 | 随机 | 在范围内随机选择"符合"数量 |

### 高级配置

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 随机暂停概率 | 15% | 每项操作中出现思考暂停的概率 |
| 暂停时长范围 | 500-2000ms | 思考暂停的时长范围 |
| 老师切换延时 | 3000ms | 切换不同老师之间的等待时间 |

### 控制面板选项

#### 基础按钮
- **开始自动填报** - 启动自动评价流程
- **暂停/继续** - 暂停或继续当前操作（仅运行时显示）
- **停止** - 停止并退出当前评价流程（仅运行时显示）

#### 功能开关
- ☑️ **自动切换评价所有老师** - 启用后会自动查找并评价所有未评价的老师
- ☑️ **保存后自动提交** - 启用后评价完成后会自动提交

#### 信息显示
- 延时范围
- 检测到的评价项数
- 评语库条数
- 保存次数
- 老师处理模式

## 📖 使用指南

### 场景一：单个老师评价
```
1. 进入某个老师的评价页面
2. 不勾选"自动切换评价所有老师"
3. 点击"开始自动填报"
4. 等待完成后自动提示
```

### 场景二：多个老师批量评价
```
1. 进入评价主列表页面
2. 勾选"自动切换评价所有老师"
3. 根据需要勾选"保存后自动提交"
4. 点击"开始自动填报"
5. 脚本会自动检测并评价所有未评价的老师
```

### 场景三：自定义评分比例
```
1. 打开控制面板中的"随机填写符合数量"配置
2. 调整"最少"和"最多"的数值
   - 保守评价：最少1个、最多2个
   - 标准评价：最少2个、最多3个
   - 宽松评价：最少3个、最多5个
3. 开始评价
```

## 🛡️ 反检测机制

### 1. 完整的鼠标事件模拟
脚本为每个交互生成完整的鼠标事件序列：
```
mouseover (鼠标移入) → mousedown (按下) → click (点击) 
→ mouseup (抬起) → change (值变更) → mouseout (鼠标移出)
```
这与真实用户操作完全一致，避免了简单的 `.click()` 被系统检测。

### 2. 随机操作延时
- **项目间延时** - 1500-4000ms 随机延时
- **保存间延时** - 3000ms 固定延时
- **老师间延时** - 3000ms 固定延时

### 3. 人类行为模拟
- **思考暂停** - 15%概率出现500-2000ms的随机暂停
- **评分分配** - 智能分配"符合"与"完全符合"的比例
- **评语选择** - 从8条评语中随机选择

### 4. 多次保存验证
- 保存2次确保数据成功提交
- 自动检测和关闭弹窗
- 避免单次操作被系统标记为自动化

## 🔍 控制台日志

脚本会在浏览器控制台（F12 打开）输出详细的执行日志：

```
[✓] [14:30:25] 脚本已加载
[*] [14:30:26] 控制面板已创建，点击按钮开始自动填报
[*] [14:30:28] 开始自动填报学生评价...
[*] [14:30:28] 进入自动切换老师模式，将逐个检测未评价老师
[*] [14:30:30] ========== 开始评价第 1 位老师 ==========
[*] [14:30:30] 切换到老师: 张三 - 高等数学
[✓] [14:30:32] 已切换到: 张三
[*] [14:30:32] 开始填报当前老师的评价...
[*] [14:30:33] 查找所有评价项目...
[*] [14:30:33] 目标: 2 个"符合"，其余为"完全符合"
...
```

日志类型：
- `[*]` - 常规信息
- `[✓]` - 成功操作
- `[!]` - 错误信息
- `[⚠]` - 警告信息

## ⚠️ 免责声明

- **法律责任** - 本工具仅供学习和研究使用，使用本工具进行的任何操作所造成的后果，用户自行承担全部法律责任
- **服务条款** - 使用前请阅读并同意学校教务系统的服务条款
- **使用风险** - 虽然脚本采用了多种反检测措施，但任何自动化工具都存在被检测的风险
- **账号安全** - 请勿在公共设备上使用，注意账号密码安全

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 如何贡献
1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

### 反馈问题
遇到问题？请在 [Issues](../../issues) 中提交详细信息：
- 浏览器版本
- 脚本版本
- 错误日志输出
- 具体操作步骤

## 📝 更新日志

### v2.0 (当前版本)
- ✅ 完整的鼠标事件模拟序列
- ✅ 随机操作延时与思考暂停
- ✅ 多老师自动切换支持
- ✅ 灵活的评分配置选项
- ✅ 暂停/恢复/停止功能
- ✅ 自动提交选项
- ✅ 详细的日志输出
- ✅ 可视化控制面板

### v1.0
- 基础自动评价功能
- 单老师评价支持

## 🔧 故障排除

### 问题：脚本未显示控制面板
**解决方案：**
1. 确认已正确安装 Tampermonkey 和脚本
2. 检查页面 URL 是否匹配脚本的匹配规则
3. 打开浏览器控制台（F12）查看错误信息
4. 尝试刷新页面或清除缓存

### 问题：自动填报中断
**解决方案：**
1. 查看控制台日志找出错误原因
2. 检查网络连接是否稳定
3. 尝试增加延时配置中的最大值
4. 确认页面元素未发生变化

### 问题：被系统提示"使用脚本注入方式自动评价"
**解决方案：**
1. 增加延时范围（推荐 2000-5000ms）
2. 启用随机思考暂停
3. 减少保存次数不会帮助，反而可能导致失败
4. 尝试降低"符合"的比例（设置为1-2个）

### 问题：某些老师评价失败
**解决方案：**
1. 检查该老师页面的页面结构是否一致
2. 手动评价一次该老师，检查是否有特殊要求
3. 在控制台记录下失败原因
4. 可在此提交 Issue

## 📞 联系方式

- 📧 Email: [yiives@foxmail.com]


## 📄 许可证

本项目采用 **MIT License** 开源许可证。详见 [LICENSE](./LICENSE) 文件。

---

<div align="center">

⭐ 如果这个项目对您有帮助，请给个 Star 支持一下！

[⬆ 回到顶部](#学生评价自动填报工具)

</div>
